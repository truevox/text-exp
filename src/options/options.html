<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Expander Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="logo-section">
          <picture>
            <source srcset="../icons/logo.webp" type="image/webp">
            <img src="../icons/logo.png" alt="PuffPuffPaste" class="logo">
          </picture>
          <div>
            <h1>PuffPuffPaste</h1>
            <p>Blow up your words! Collaborative Text Expansion with Cloud Sync</p>
          </div>
        </div>
        <div class="header-actions">
          <button id="exportButton" class="secondary-button">Export Data</button>
          <button id="importButton" class="secondary-button">Import Data</button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Initial Setup / Get Started Section -->
      <section class="settings-section" id="initial-setup-section">
        <h2 class="section-title">🚀 Get Started with PuffPuffPaste!</h2>
        <div class="settings-content">
          <p class="setting-description">
            Welcome! To unlock the full power of collaborative text expansion, 
            let's set up your snippet storage. You can choose between:
          </p>
          <ul>
            <li><strong>Local Folder Sync:</strong> Keep your snippets in a folder on your computer.</li>
            <li><strong>Cloud Sync:</strong> Synchronize snippets across devices using Google Drive, Dropbox, or OneDrive.</li>
          </ul>
          <div class="setting-item">
            <button id="getStartedButton" class="primary-button">
              Configure Snippet Storage
            </button>
          </div>
        </div>
      </section>

      <!-- Status Banner -->
      <div id="statusBanner" class="status-banner hidden">
        <div class="status-content">
          <span class="status-text"></span>
          <button class="status-close">&times;</button>
        </div>
      </div>

      <!-- Settings Sections -->
      <div class="settings-grid">
        <!-- General Settings -->
        <section class="settings-section">
          <h2 class="section-title">General Settings</h2>
          <div class="settings-content">
            <div class="setting-item">
              <label class="setting-label">
                <input type="checkbox" id="enabledCheckbox" class="setting-checkbox">
                <span class="setting-title">Enable Text Expansion</span>
              </label>
              <p class="setting-description">Turn text expansion on or off globally</p>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <input type="checkbox" id="caseSensitiveCheckbox" class="setting-checkbox">
                <span class="setting-title">Case Sensitive Triggers</span>
              </label>
              <p class="setting-description">Make trigger matching case sensitive</p>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <input type="checkbox" id="notificationsCheckbox" class="setting-checkbox">
                <span class="setting-title">Show Notifications</span>
              </label>
              <p class="setting-description">Display notifications for sync and other events</p>
            </div>

            <div class="setting-item">
              <label class="setting-label" for="triggerDelaySlider">
                <span class="setting-title">Trigger Delay</span>
                <span class="setting-value" id="triggerDelayValue">100ms</span>
              </label>
              <input type="range" id="triggerDelaySlider" class="setting-slider" 
                     min="0" max="1000" step="50" value="100">
              <p class="setting-description">Delay before triggering text expansion</p>
            </div>
          </div>
        </section>

        <!-- Local Filesystem Sources -->
        <section class="settings-section" id="local-folder-sources">
          <h2 class="section-title">Local Folder Sources</h2>
          <div class="settings-content">
            <div class="setting-item">
              <div class="scoped-sources-info">
                <p class="setting-description">
                  Set up local folders for your snippet sources. You can configure three levels:
                  <strong>Personal</strong> (highest priority), <strong>Team</strong>, and <strong>Organization</strong> (lowest priority).
                  When the same trigger exists in multiple sources, the higher priority source takes precedence.
                </p>
              </div>
            </div>


          </div>
        </section>

        <!-- Cloud Sync Settings -->
        <section class="settings-section" id="cloud-sync-section">
          <h2 class="section-title">Cloud Synchronization</h2>
          <div class="settings-content">
            <div class="setting-item">
              <label class="setting-label" for="cloudProviderSelect">
                <span class="setting-title">Cloud Provider</span>
              </label>
              <select id="cloudProviderSelect" class="setting-select">
                <option value="local">Local Storage Only</option>
                <option value="google-drive">Google Drive</option>
                <option value="dropbox">Dropbox</option>
                <option value="onedrive">OneDrive</option>
              </select>
              <p class="setting-description">Choose where to sync your snippets</p>
            </div>

            <div class="setting-item">
              <div class="cloud-status" id="cloudStatus">
                <div class="status-indicator offline" id="statusIndicator"></div>
                <div class="status-info">
                  <span class="status-title" id="statusTitle">Not Connected</span>
                  <span class="status-details" id="statusDetails">Select a cloud provider to get started</span>
                  <span class="last-sync-info" id="lastSyncInfo"></span>
                  <span class="sync-error-info" id="syncErrorInfo"></span>
                </div>
                <button id="connectButton" class="primary-button">Connect</button>
              </div>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <input type="checkbox" id="autoSyncCheckbox" class="setting-checkbox">
                <span class="setting-title">Automatic Sync</span>
              </label>
              <p class="setting-description">Automatically sync changes with cloud storage</p>
            </div>

            <div class="setting-item">
              <label class="setting-label" for="syncIntervalSlider">
                <span class="setting-title">Sync Interval</span>
                <span class="setting-value" id="syncIntervalValue">30 minutes</span>
              </label>
              <input type="range" id="syncIntervalSlider" class="setting-slider" 
                     min="5" max="120" step="5" value="30">
              <p class="setting-description">How often to sync with cloud storage</p>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="setting-title">Personal Snippets Folder</span>
              </label>
              <input type="text" id="personalFolderIdInput" class="setting-input" placeholder="Enter folder ID or select folder">
              <button id="selectPersonalFolderButton" class="secondary-button">Select Folder</button>
              <p class="setting-description">The folder where your personal snippets are stored.</p>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="setting-title">Department Snippets Folder</span>
              </label>
              <input type="text" id="departmentFolderIdInput" class="setting-input" placeholder="Enter folder ID or select folder">
              <button id="selectDepartmentFolderButton" class="secondary-button">Select Folder</button>
              <p class="setting-description">The folder for department-wide snippets (overrides organization snippets).</p>
            </div>

            <div class="setting-item">
              <label class="setting-label">
                <span class="setting-title">Organization Snippets Folder</span>
              </label>
              <input type="text" id="organizationFolderIdInput" class="setting-input" placeholder="Enter folder ID or select folder">
              <button id="selectOrganizationFolderButton" class="secondary-button">Select Folder</button>
              <p class="setting-description">The folder for organization-wide snippets.</p>
            </div>

            <div class="setting-item">
              <div class="sync-actions">
                <button id="syncNowButton" class="secondary-button">Sync Now</button>
                <button id="forceUploadButton" class="secondary-button">Force Upload</button>
                <button id="forceDownloadButton" class="secondary-button">Force Download</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Collaboration Settings -->
        <section class="settings-section">
          <h2 class="section-title">Collaboration</h2>
          <div class="settings-content">
            <div class="setting-item">
              <label class="setting-label">
                <input type="checkbox" id="sharedSnippetsCheckbox" class="setting-checkbox">
                <span class="setting-title">Enable Shared Snippets</span>
              </label>
              <p class="setting-description">Allow sharing snippets with team members via shared folders</p>
            </div>
          </div>
        </section>

        <!-- Data Management -->
        <section class="settings-section">
          <h2 class="section-title">Data Management</h2>
          <div class="settings-content">
            <div class="setting-item">
              <div class="data-stats" id="dataStats">
                <div class="stat-item">
                  <span class="stat-label">Total Snippets</span>
                  <span class="stat-value" id="totalSnippets">0</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Storage Used</span>
                  <span class="stat-value" id="storageUsed">0 KB</span>
                </div>
                <div class="stat-item">
                  <span class="stat-label">Last Sync</span>
                  <span class="stat-value" id="lastSync">Never</span>
                </div>
              </div>
            </div>

            <div class="setting-item">
              <div class="data-actions">
                <button id="cleanupStorageButton" class="secondary-button">Clean Up Invalid Sources</button>
                <button id="clearLocalButton" class="danger-button">Clear Local Data</button>
                <button id="resetAllButton" class="danger-button">Reset All Settings</button>
              </div>
            </div>
          </div>
        </section>

        <!-- Synced Snippets -->
        <section class="settings-section">
          <h2 class="section-title">Synced Snippets</h2>
          <div class="settings-content">
            <div id="syncedSnippetsList" class="synced-snippets-list">
              <!-- Snippets will be dynamically loaded here -->
              <p class="setting-description">Loading snippets...</p>
            </div>
          </div>
        </section>

        <!-- Advanced Settings -->
        <section class="settings-section">
          <h2 class="section-title">Advanced</h2>
          <div class="settings-content">
            <div class="setting-item">
              <label class="setting-label" for="debugCheckbox">
                <input type="checkbox" id="debugCheckbox" class="setting-checkbox">
                <span class="setting-title">Debug Mode</span>
              </label>
              <p class="setting-description">Enable detailed logging for troubleshooting</p>
            </div>

            <div class="setting-item">
              <button id="viewLogsButton" class="secondary-button">View Logs</button>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-info">
          <p>Text Expander v<span id="versionNumber">1.0.0</span></p>
          <p>Made with ❤️ for productivity</p>
        </div>
        <div class="footer-links">
          <a href="#" id="helpLink">Help & Support</a>
          <a href="#" id="feedbackLink">Send Feedback</a>
          <a href="#" id="privacyLink">Privacy Policy</a>
        </div>
      </div>
    </footer>
  </div>

  <!-- Hidden file input for import -->
  <input type="file" id="importFileInput" accept=".json" style="display: none;">

  <script type="module" src="options.js"></script>
</body>
</html>